name: üöÄ Keep n8n Alive

on:
  schedule:
    # –ö–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã —Å 7:00 –¥–æ 23:00
    - cron: '*/2 7-23 * * *'
    # –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –Ω–æ—á—å—é  
    - cron: '*/5 0-6,23-23 * * *'
  workflow_dispatch:  # –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é

jobs:
  keep-n8n-warm:
    runs-on: ubuntu-latest
    steps:
      - name: üî• Light ping to keep n8n warm
        run: |
          echo "üïí Pinging n8n at $(date)"
          RESPONSE=$(curl -s -w "HTTP_STATUS:%{http_code}" \
            "https://mlmotiv.app.n8n.cloud/webhook/data?ping=true")
          
          # –ò–∑–≤–ª–µ–∫–∞–µ–º HTTP —Å—Ç–∞—Ç—É—Å
          HTTP_STATUS=$(echo "$RESPONSE" | grep -o 'HTTP_STATUS:[0-9]*' | cut -d':' -f2)
          BODY=$(echo "$RESPONSE" | sed 's/HTTP_STATUS:[0-9]*//g')
          
          echo "üì° Response: $BODY"
          echo "‚ö° HTTP Status: $HTTP_STATUS"
          echo "‚úÖ Ping completed at $(date)"
